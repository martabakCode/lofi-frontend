<div class="space-y-6">
    <!-- Header Section -->
    <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
        <div class="flex items-center gap-4">
            <div class="w-14 h-14 bg-brand-soft text-brand-main rounded-2xl flex items-center justify-center shadow-sm">
                <i class="pi pi-map-marker text-2xl"></i>
            </div>
            <div>
                <h1 class="text-2xl font-bold text-text-primary m-0">Branch Management</h1>
                <p class="text-text-secondary m-0">Manage physical branch locations and assignments</p>
            </div>
        </div>
        <div class="flex items-center gap-3">
            <button class="btn-primary" (click)="openCreateModal()">
                <i class="pi pi-plus mr-2"></i> Add Branch
            </button>
            <button class="btn-secondary px-3" (click)="loadBranches()" title="Refresh" [disabled]="loading()">
                <i class="pi pi-refresh" [class.pi-spin]="loading()"></i>
            </button>
        </div>
    </div>

    <!-- Stats Section -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
        <div class="card p-6 flex items-center gap-4">
            <div class="w-12 h-12 bg-blue-100 text-blue-600 rounded-xl flex items-center justify-center">
                <i class="pi pi-building text-xl"></i>
            </div>
            <div>
                <p class="text-xs font-bold text-text-muted uppercase tracking-wider m-0">Total Branches</p>
                <p class="text-2xl font-bold text-text-primary m-0">{{ branches().length }}</p>
            </div>
        </div>
    </div>

    <!-- Error Message -->
    <div *ngIf="error()" class="error-alert">
        <i class="pi pi-exclamation-triangle"></i>
        <span>{{ error() }}</span>
        <button class="btn-link" (click)="loadBranches()">Try Again</button>
    </div>

    <!-- Table Card -->
    <div class="card">
        <div class="table-container border-none rounded-none shadow-none">
            <table>
                <thead>
                    <tr>
                        <th class="pl-6">Branch Name</th>
                        <th>Address</th>
                        <th>Contact</th>
                        <th>Status</th>
                        <th class="text-center pr-6">Actions</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-border-muted">
                    <!-- Loading -->
                    <tr *ngIf="loading()">
                        <td colspan="5" class="py-20 text-center">
                            <i class="pi pi-spin pi-spinner text-3xl text-brand-main"></i>
                        </td>
                    </tr>

                    <!-- Empty -->
                    <tr *ngIf="!loading() && branches().length === 0">
                        <td colspan="5" class="py-20 text-center text-text-muted">
                            No branches found. Click "Add Branch" to create one.
                        </td>
                    </tr>

                    <!-- Rows -->
                    <tr *ngFor="let branch of branches()" class="group hover:bg-bg-muted/50 transition-colors">
                        <td class="pl-6 py-4">
                            <div class="flex items-center gap-3">
                                <div
                                    class="w-10 h-10 bg-brand-soft text-brand-main rounded-lg flex items-center justify-center font-bold">
                                    {{ branch.name.charAt(0) }}
                                </div>
                                <span class="font-bold text-text-primary">{{ branch.name }}</span>
                            </div>
                        </td>
                        <td>
                            <div class="flex flex-col">
                                <span class="text-sm font-medium text-text-primary">{{ branch.address }}</span>
                                <span class="text-xs text-text-secondary">{{ branch.city }}, {{ branch.state }} {{
                                    branch.zipCode }}</span>
                            </div>
                        </td>
                        <td>
                            <div class="flex items-center gap-2 text-text-secondary">
                                <i class="pi pi-phone text-xs"></i>
                                <span class="text-sm">{{ branch.phone }}</span>
                            </div>
                        </td>
                        <td>
                            <span class="badge badge-success">Active</span>
                        </td>
                        <td class="pr-6 py-4 text-center">
                            <div class="flex items-center justify-center gap-2">
                                <button (click)="openEditModal(branch)"
                                    class="w-8 h-8 rounded-lg bg-bg-muted text-text-muted hover:text-brand-main transition-all flex items-center justify-center">
                                    <i class="pi pi-pencil"></i>
                                </button>
                                <button (click)="onDelete(branch.id)"
                                    class="w-8 h-8 rounded-lg bg-bg-muted text-text-muted hover:text-red-500 transition-all flex items-center justify-center">
                                    <i class="pi pi-trash"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Add/Edit Modal (Simplified for now using prompt) -->
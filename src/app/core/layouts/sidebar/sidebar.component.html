<aside class="sidebar fixed inset-y-0 left-0 z-50 w-64 transform transition-all duration-300 lg:translate-x-0"
    [class.translate-x-0]="isOpen()" [class.-translate-x-full]="!isOpen()">

    <div class="logo-container">
        <div class="flex items-center gap-3">
            <div
                class="w-10 h-10 rounded-xl bg-brand-main flex items-center justify-center text-white font-bold shadow-lg shadow-brand-main/20">
                L
            </div>
            <span class="text-xl font-extrabold text-text-primary tracking-tight">
                Lofi<span class="text-brand-main">Admin</span>
            </span>
        </div>
    </div>

    <nav class="menu-section">
        <div class="menu-label">Main Navigation</div>

        <a routerLink="/dashboard" routerLinkActive="active-link" [routerLinkActiveOptions]="{ exact: true }"
            class="menu-item">
            <i class="pi pi-home"></i>
            <span>Dashboard</span>
        </a>

        <!-- Loan Management -->
        <ng-container *ngIf="isAdmin() || hasAnyRole(['ROLE_MARKETING', 'ROLE_CUSTOMER'])">
            <div class="menu-label mt-6">Loan Management</div>
            <a routerLink="/dashboard/loans/apply" routerLinkActive="active-link" class="menu-item">
                <i class="pi pi-pencil"></i>
                <span>Apply Loan</span>
            </a>
        </ng-container>

        <ng-container *ngIf="isAdmin() || hasAnyRole(['ROLE_MARKETING'])">
            <a routerLink="/dashboard/loans/review" routerLinkActive="active-link" class="menu-item">
                <i class="pi pi-search-plus"></i>
                <span>Loan Review</span>
            </a>
        </ng-container>

        <ng-container *ngIf="isAdmin() || hasAnyRole(['ROLE_BRANCH_MANAGER', 'ROLE_BACK_OFFICE'])">
            <a routerLink="/dashboard/loans/approval" routerLinkActive="active-link" class="menu-item">
                <i class="pi pi-check-square"></i>
                <span>Loan Approval</span>
            </a>
        </ng-container>

        <ng-container *ngIf="isAdmin() || hasAnyRole(['ROLE_BACK_OFFICE'])">
            <a routerLink="/dashboard/disbursements" routerLinkActive="active-link" class="menu-item">
                <i class="pi pi-money-bill"></i>
                <span>Disbursements</span>
            </a>
        </ng-container>

        <!-- Configurations (Admin only) -->
        <ng-container *ngIf="isAdmin()">
            <div class="menu-label mt-6">Configurations</div>

            <a routerLink="/dashboard/products" routerLinkActive="active-link" class="menu-item">
                <i class="pi pi-box"></i>
                <span>Products</span>
            </a>

            <a routerLink="/dashboard/users" routerLinkActive="active-link" class="menu-item">
                <i class="pi pi-users"></i>
                <span>Staff & Roles</span>
            </a>

            <a routerLink="/dashboard/branches" routerLinkActive="active-link" class="menu-item">
                <i class="pi pi-map-marker"></i>
                <span>Branches</span>
            </a>

            <a routerLink="/dashboard/roles" routerLinkActive="active-link" class="menu-item">
                <i class="pi pi-shield"></i>
                <span>Permissions</span>
            </a>
        </ng-container>
    </nav>

    <div class="logout-container">
        <button type="button" (click)="onLogout.emit()" class="btn-logout">
            <i class="pi pi-power-off"></i>
            <span>Sign Out</span>
        </button>
    </div>
</aside>
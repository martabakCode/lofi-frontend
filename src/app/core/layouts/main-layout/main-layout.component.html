<div class="flex h-screen bg-bg-page overflow-hidden font-sans text-text-primary transition-colors duration-200">
    <!-- Mobile Overlay -->
    <div *ngIf="isSidebarOpen()" (click)="closeSidebar()"
        class="lg:hidden fixed inset-0 bg-slate-900/50 backdrop-blur-sm z-40 transition-opacity duration-300">
    </div>

    <!-- Sidebar with synchronized dark theme -->
    <app-sidebar [isOpen]="isSidebarOpen()" (onClose)="closeSidebar()" (onLogout)="logout()" 
        (onToggleCollapse)="onSidebarToggleCollapse($event)"></app-sidebar>

    <!-- Main Content Area - margin adjusts based on sidebar collapsed state -->
    <main class="flex-1 flex flex-col min-w-0 overflow-hidden transition-all duration-300"
        [class.lg:ml-64]="!isSidebarCollapsed()" 
        [class.lg:ml-20]="isSidebarCollapsed()">
        <!-- Topbar with synchronized styling -->
        <app-topbar [user]="user()" [isSidebarCollapsed]="isSidebarCollapsed()" (onToggleSidebar)="toggleSidebar()"></app-topbar>

        <!-- Content Area -->
        <section class="flex-1 overflow-y-auto p-4 lg:p-8 relative bg-bg-page transition-colors duration-200">
            <div class="max-w-7xl mx-auto w-full">
                <router-outlet></router-outlet>
            </div>
        </section>
    </main>
</div>